第 58 卷 第 5 期 Vol. 58 No. 5
2020 年 5 月 May 2020
农业装备与车辆工程
AGRICULTURAL EQUIPMENT & VEHICLE ENGINEERING
doi:10.3969/j.issn.1673-3142.2020.05.031
基于卷积神经网络的自动反击的研发设计
(030024 山西省 太原市 太原科技大学 机械工程学院)
[ 摘要 ] 为满足 机甲大师机器人比赛的需要 针对在复杂环境下对具有不同特征的物体进
行快速的识别与定位 从总体的设计思路 识别模块 运动控制 通信模块等几个主要部分详细介绍了设
计原理与具体的实现方法 设计了一套可以实现机器人自动反击的应用程序 该程序能够满足提高机器人
射击精准度的性能需求
[ 关键词 ] 卷积神经网络 深度学习 串口通信
[ 中图分类号 ] [ 文献标识码 ] A [ 文章编号 ] - ( ) - 
Automatic Counterattack Based on Convolution Neural Network Wei Chaoqi, Li Wei
(School of Mechanical Engineering, Taiyuan University of Science and Technology, Taiyuan City, Shanxi Province 030024, China)
[Abstract] In order to meet the needs of robot competition, aiming at the rapid recognition and positioning of objects with different
characteristics in complex environments, the team designed a set of application programs, which can meet higher performance
requirements. This paper introduces the principle and concrete implementation method of this design in detail in the aspects of overall
design ideas, recognition module, motion control, communication module and other major parts.
[Key words] convolution neural network; deep learning; serial communication
0 引言
随着科技的发展与自动化技术的不断进步,
科学技术在广泛交叉和深度融合中不断创新。以
机器人技术为代表的智能科技产业发展十分迅
速,已经成为当今科技创新的重要标志。
为了使人工智能与机器人技术能在更广泛、更
深入的层面展开研究,国内外开展了多种形式 、多
个层面的机器人比赛。把这些竞赛机器人中涉及
到的一些共同问题进行深入研究 , 无疑对学术研
究和生产应用都有很强的实际意义 [1]。
1 规则简介
共青团中央和中华学联主办,深圳市大疆创
新科技有限公司承办了“全国大学生机器人大赛
ROBOMASTER 机甲大师赛”(以下称“机甲大
师”),在比赛中评委会要求每个参赛团队设计
1 套自动反击系统,以提升机器人射击的精准度。
在机甲大师比赛过程中,每个上场机器人(除
空中机器人外)身上都装有裁判系统,裁判系统
中的装甲模块(如图 1、图 2)供每支参赛队伍
进行机器人自动识别瞄准算法的开发。比赛中,
参赛队伍分别提交一台哨兵机器人进入赛场。要
求哨兵机器人在不接受遥控信息的前提下,可以
沿着轨道自由运动并对敌方装甲模块进行全自动
射击 [2]。按照比赛规则,裁判系统为自动反击提
供特征识别,如图 1、图 2 所示。
机器人需要在接收到操作手下达的瞄准命令
后,能够在较短的时间内从安装在机器人特定部
位的摄像头所捕捉到的画面中找到固定的敌方机
收稿日期 : 2019-05-13 修回日期 : 2019-06-04
图 1 装甲板 Fig.1 Armor plate
图 2 装甲板 Fig.2 Armor plate


140 农业装备与车辆工程 2020 年
器人,并自动控制云台使发射枪口对准敌机进行
击打。
考虑到敌我机器人有一定的运动速度,所以
需要对机器人视野内地方目标进行实时追踪,因
此,这一系列的规则对程序性能及算法具有一定
的要求。
2 设计总体
2.1 设计目标
为满足比赛的各项性能要求,保证机器人射
击精度,初步考虑,在 NVIDIA Jetson TX2 上运
行程序时,每秒处理的帧数需要超过 50 帧。并
且当云台向目标旋转时,不会产生过度震动,在
目标区域来回抖动不得超过 3 次。
2.2 设计方案
目前在深度卷积神经网络的物体检测方面,
Faster-CNN 是应用比较广泛的检测方法之一,
但是由于网络结构参数计算量大,导致其检测速
度慢,因而不能达到某些比赛对于实时检测的要
求。在优化方案中,许多方法都是牺牲检测精度
换取检测速度。为解决精度与速度并存的问题,
YOLO 与 SSD 等算法应运而生,YOLO 算法的最
大优势就是速度快,可以实现实时检测 [3]。
本应用主要运用 YOLO 算法并对其进修改。
首先制作数据集并通过对其集进行训练,得出权
重文件,然后对 YOLO 进行修改,加入串口通信,
使其可以给嵌入式部分传输目标数据,解决复杂
环境下的非线性光照多目标识别与定位问题,为
自动化与监测提供应用。程序整体思路见图 3。
3 识别模块设计
3.1 滑动窗口技术
滑动窗口技术的基本原理是采用不同大小和
比例的窗口在整张图片上以一定的距离从左到右
从上到下滑动,然后对这些窗口对应的区域进行
分类以达到识别目标的目的,这样就可以实现对
整张图片的检测。
但是滑动窗口技术也有致命的缺点,就是如
果对每个窗口都经过分类器去做预测,会是一个
很大的计算量,所以分类器不能过于复杂。
经过滑动窗口之后,理论上可以检测出目标,
但是可能存在一个目标物体被多次检测的问题,
所以需要一个算法标出最可能是本目标的检测结
果,其余舍去,可以应用非极大值抑制算法。
3.2 非极大值抑制算法
非极大值抑制算法在所有的检测算法中都会
用到。该算法主要是通过搜索局部最大变量来解
决一个目标被多次检测的问题。例如一张图中,
一个目标会被多次检测,但是其实我们希望最后
仅仅输出其中一个最好的预测框,那么可以采用
这个算法来实现这样的效果。本算法的原理是通
过比较被测目标所有的检测结果的置信度,以找
到置信度最大的检测结果,然后输出。此算法可
以更准确地确定目标。
3.3 模块总体设计理念
现在介绍一下识别模块的综合设计思路,原
理如下:把物体检测问题这个离散问题处理成回
归问题。将一张图片输入到一个卷积神经网络结
构后,程序就可以直接预测图片内容的种类和类
别概率。算法首先把输入的图像划分成 s×s 的
格子,通过滑动窗口技术对每个格子都预测 2 个
类别(敌我机器人),x 是y 格子的中心坐标,
w 和 h 分别除以图像的 w 和 h 实现归一化。另外,
每个格子都预测 2 个假定类别的概率,每个格子
都对应一个分数,通过非极大值抑制算法在每个
格子的 2 个分数中取最大的分数。如果这个分数
大于我们设定的值,我们就认为这格子中的种类
为较大分数所对应的机器人类别,同时可以知道
框的坐标。
4 运动控制模块
PnP 姿态解算可以把识别模块中得到的图片
上目标的平面二维坐标转化为空间三维坐标,原
理如下:在使用摄像头进行距离检测之前,需要
图 3 程序整体思路 Fig.3 Overall programming idea
开始
摄像头启动
摄像头启动
设备重启
否
否
否
是
是
是
A
A
读取前帧并对 其进行运算
检测目标
PnP 算法把目标的 图像坐标转化为世 界坐标并串口发送
接收到 结束命令
结束


141
第 58 卷第 5 期
对相机进行标定。单目测距识别世界坐标系的思
路 [4] 大约是:先对相机标定,得出相机的内参数,
然后通过已知物体在三维世界的坐标,在图像上
一一对应的图像像素坐标,以及相机内参数,求
解出此时相机相对于空间已知物体的外参数,即
旋转向量以及平移向量,最后对旋转向量进行数
据分析处理,求解出此时相机相对于已知物体空
间坐标的三维姿态。[5]
5 通信模块
通过姿态解算,得到目标物体的实际坐标后,
可以通过串口通信把坐标发送给云台,通过云台
转动最终实现自动反击。
在单片机数据串口中,按照通讯方式不同,
一般分为同步通信和异步通信 2 种。同步通信(2
根线)是把许多字符组成一个信息组,字符可以
一个接一个地传输。主要特征是在没有信息要传
输时,要填上空字符。异步通信方式是以独立字
节传输数据的,所以独立字节开端就有起始信号,
字节后有一个以上终止信号,在传输迁移开始到空
白迁移,数据起始位占有 1 位,停止位占有 2 位。[6]
异步通信方式应用的不足之处就是,对数据信息
的传输效率相对较低。此处我们采用同步通信的
方式。
6 结语
综上所述,基于卷积神经网络的自动反击的
识别系统的技术应用,采用传感器技术、计算机
技术和自动控制技术相结合,需要从软硬件层面
进行优化,注重从多方面考虑识别的性能提高,
减小延时。实践证明,相比其他图像检索方法,
卷积神经网络算法有鲁棒性高的特点,但是对硬
件算力要求更高,帧数上没有达到预期目标。以
后可以考虑一些使用战车形态学特征,阈值分割
等方法进行实验,进行更深入的研究,进一步提
高系统性能。
基于卷积神经网络自动反击识别系统的理论
研究和技术应用,为实际操作提供理论支持,促
进实践工作的开展。
参考文献
[ 张华 , 李祖枢 , 吴健 , 等 . 竞赛机器人中的巡线技术及其实 现 [J].2005,28(10):76-78.
[2] 白峭峰 , 王刚 . 哨兵机器人的研发设计 [J]. 机械研究与应
用 ,2016,29(3):84-85,89.
[3] 孙贵宾 . 基于深度卷积神经网络的道路场景物体检测方法
研究 [D]. 北京 : 北方工业大学 ,2017.
[4] 孙青 . 基于嵌入式控制系统的自动导引小车设计与实现 [D].
南京 : 南京理工大学 ,2010
[5] 刘公绪 . 蔚保国 . 史凌峰 . 一种压缩型全姿态角四元数的表
示方法 [J]. 西安电子科技大学学报 ,2019(3).
[6] 陈兆飞周军华 . 全景视觉态势感知系统的多通道串口通信
[J]. 电子技术与软件工程 ,2019(5):86-88.
作 者 简 介 卫 超 奇 1998— 男 太 原 科 技 大 学 在
读 本 科 生 机 械 设 计 制 造 及 其 自 动 化 专 业 E-mail weichaoqi00@qq.com
卫超奇 等基于卷积神经网络的自动反击的研发设计
并结合理论分析验证了该系统的可行性。该测试
系统不仅能准确采集到齿轮组啮合频率的幅值特
征,还能准确分析出齿轮组啮合频率处随工况变
化的幅值特征,可以作为评价齿轮动力学特性的
测试工具使用。
参考文献
[ 赵韩 , 吴其林 , 黄康 , 等 . 国内齿轮研究现状及问题研究 [J]. 机械工程学报 ,2013,49(19):11-20.
[2] 杨秀芳 . 张西宁 . 齿轮局部故障振动信号分析及提取方法研 究 [J]. 西安理工大学学报 ,2019.35(1):28-33. [3] Peng Z, Chu F, He Y. Vibration signal analysis and feature extraction based on reassigned wavelet scalogram[J]. J Sound Vib, 2002, 253(5): 1087-1100.
[4] 张君东 , 潘宏侠 , 刘春林 . 基于小波和神经网络的齿轮箱故 障诊断 [J]. 煤矿机械 ,2014,35(8):268-270.
[5] 丁康 . 李巍华 . 朱小勇 . 齿轮与齿轮箱故障诊断实用技术 [M].
北京 : 机械工业出版 ,2005.
[6] 李永焯 , 丁康 , 何国林 , 等 . 齿轮系统振动响应信号调制边 频带产生机理 [J]. 机械工程学报 ,2018,54(5):105-112.
[7] 王彦兵 , 李慧敏 , 丁彩红 . 基于 LabVIEW 的旋转机械转子 振动监测系统 [J]. 仪表技术与传感器 ,2011(5):27-29.
[8] 郝建亮 , 张彦江 , 陈志勇 , 等 . 便携式机械振动测试系统
的设计与实现 [J]. 组合机床与自动化加工技术 ,2013(5):7072,75.
[9] 白云 , 等 . 基于 LabVIEW 的数据采集与处理技术 [M]. 西安 :
西安电子科技大学出版社 ,2009.
[10] 朱革 , 彭东林 , 张兴红 , 等 . 齿轮振动噪声分析及控制 [J]. 现代制造工程 ,2002(10):48-51. [11] 龙华伟 , 等 .LabVIEW 数据采集与仪器控制 [M]. 北京 : 清
华大学出版社 ,2016.
作者简介 王伟功 1995— 硕士研究生 研究方向 齿轮动力学 E-mail wangwg@163.com
上接第 页